<html>
<head>
<title>Sound test</title>
<script src='js/jsAudio.js'></script>

<script>
// The iPhone won't play a sound unless it's loaded or played
// in response to user input, so users have to click a button
// to enable audio.
// WAV appears to be the only format supported by all major browsers.
function iThing() {
  return (navigator.userAgent.match(/iPhone/i)) || 
    (navigator.userAgent.match(/iPod/i));
}

var files = new jsAudio.AudioFiles('images/sys/sound/');

function init() {
  if (iThing()) return;
  loadSounds();
}

var loaded = false;

function loadSounds() {
  if (loaded) return;
  files.getFile('tick');
  files.getFile('swoosh');
  files.getFile('ouch');
  files.getFile('shot');
  files.getFile('thud');
  loaded = true;
}

function playSound(name) {
  loadSounds();
  files.playFile(name);
}
</script>
<body onload='init()'>
<input type='submit' onClick="playSound('tick')" value='Tick'/>
<input type='submit' onClick="playSound('swoosh')" value='Swoosh'/><br/>
<input type='submit' onClick="playSound('shot')" value='Shot'/>
<input type='submit' onClick="playSound('ouch')" value='Ouch'/>
<input type='submit' onClick="playSound('thud')" value='Thud'/>
<p>Volume: <span id='volume'></span></p>
</body>
</html>
