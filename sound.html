<html>
<head>
<title>Sound test</title>
<script>
  // The iPhone won't play a sound unless it's loaded or played
  // in response to user input, so users have to click a button
  // to enable audio.
  // WAV appears to be the only format supported by all major browsers.
  function iThing() {
    return (navigator.userAgent.match(/iPhone/i)) || 
      (navigator.userAgent.match(/iPod/i));
  }

  function init() {
    if (iThing()) return;
    loadSounds();
  }

  var loaded = false;

  function loadSounds() {
    if (loaded) return;
    window.sounds = new Object();
    loadSound('tick');
    loadSound('swoosh');
    loadSound('ouch');
    loadSound('shot');
    loadSound('thud');
    loaded = true;
  }
  function loadSound(name) {
    var sound = new Audio('images/sys/sound/' + name + '.wav');
    sound.load;
    window.sounds[name] = sound;
  }
  function playSound(name) {
    loadSounds();
    var sound = window.sounds[name];
    try {
      sound.pause();
      sound.currentTime = 0;
    } catch(e) {}
    sound.play();
  }
</script>
<body onload='init()'>
<input type='submit' onClick="playSound('tick')" value='Tick'/>
<input type='submit' onClick="playSound('swoosh')" value='Swoosh'/><br/>
<input type='submit' onClick="playSound('shot')" value='Shot'/>
<input type='submit' onClick="playSound('ouch')" value='Ouch'/>
<input type='submit' onClick="playSound('thud')" value='Thud'/>
</body>
</html>
